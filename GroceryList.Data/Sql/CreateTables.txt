CREATE TABLE IF NOT EXISTS Users (
    Id CHAR(36) PRIMARY KEY,
    Name VARCHAR(255) NOT NULL,
    Email VARCHAR(255) NOT NULL UNIQUE,
    PasswordHash VARBINARY(255) NOT NULL,
    PasswordSalt VARBINARY(255) NOT NULL,
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    UpdatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL
);

CREATE TABLE IF NOT EXISTS GroceryLists (
    Id CHAR(36) PRIMARY KEY,
    Title VARCHAR(255) NOT NULL,
    CreatedBy CHAR(36) NOT NULL,
    FOREIGN KEY (CreatedBy) REFERENCES Users(Id),
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    UpdatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL
);

CREATE TABLE IF NOT EXISTS UserGroceryLists (
    Id CHAR(36) PRIMARY KEY,
    UserId CHAR(36) NOT NULL,
    GroceryListId CHAR(36) NOT NULL,
    FOREIGN KEY (UserId) REFERENCES Users(Id),
    FOREIGN KEY (GroceryListId) REFERENCES GroceryLists(Id),
    CreatedAt DATETIME DEFAULT CURRENT_TIMESTAMP NOT NULL,
    UpdatedAt DATETIME DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL
)